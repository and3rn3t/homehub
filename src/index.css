/* Note: Tailwind imported from main.css */
/* @import 'tailwindcss'; */
/* @import 'tw-animate-css'; */

@layer base {
  * {
    @apply border-border;
  }
}

:root {
  /* iOS Safe Area Insets - For notch, Dynamic Island, and home indicator */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);

  /* iOS 18 Liquid Glass - Light Mode (Enhanced Contrast) */
  --background: oklch(0.96 0.008 250); /* Slightly darker with blue tint */
  --foreground: oklch(0.15 0.01 264);

  /* Glass Materials with Vibrancy (Increased opacity) */
  --card: oklch(0.99 0.002 264 / 0.95); /* More opaque cards */
  --card-foreground: oklch(0.15 0.01 264);
  --popover: oklch(0.99 0.002 264 / 0.98); /* More opaque popovers */
  --popover-foreground: oklch(0.15 0.01 264);

  /* iOS System Colors */
  --primary: oklch(0.55 0.22 250); /* iOS System Blue */
  --primary-foreground: oklch(1 0 0);
  --secondary: oklch(0.92 0.012 264 / 0.85); /* More visible glass */
  --secondary-foreground: oklch(0.35 0.02 264);
  --accent: oklch(0.65 0.19 145); /* iOS System Green */
  --accent-foreground: oklch(1 0 0);
  --destructive: oklch(0.55 0.22 25); /* iOS System Red */
  --destructive-foreground: oklch(1 0 0);

  /* UI Elements (Enhanced contrast) */
  --muted: oklch(0.94 0.008 264 / 0.7); /* More visible muted */
  --muted-foreground: oklch(0.42 0.02 264);
  --border: oklch(0.85 0.012 264 / 0.5); /* More visible borders */
  --input: oklch(0.92 0.012 264 / 0.85);
  --ring: oklch(0.55 0.22 250 / 0.4); /* Focus ring */

  /* iOS Spacing System (8pt grid) */
  --radius: 0.75rem; /* 12px */
  --radius-sm: 0.5rem; /* 8px */
  --radius-lg: 1rem; /* 16px */
  --radius-xl: 1.5rem; /* 24px */
}

.dark {
  /* iOS 18 Liquid Glass - Dark Mode with Rich Vibrancy (Enhanced) */
  --background: oklch(0.17 0.012 264); /* Slightly lighter with more chroma */
  --foreground: oklch(0.95 0.005 264);

  /* Dark Glass Materials (Enhanced contrast) */
  --card: oklch(0.22 0.012 264 / 0.92); /* More opaque */
  --card-foreground: oklch(0.95 0.005 264);
  --popover: oklch(0.2 0.014 264 / 0.95); /* More opaque */
  --popover-foreground: oklch(0.95 0.005 264);

  /* iOS System Colors (Dark Mode) */
  --primary: oklch(0.6 0.2 250); /* Brighter blue for dark */
  --primary-foreground: oklch(0.95 0.005 264);
  --secondary: oklch(0.27 0.012 264 / 0.85); /* More visible */
  --secondary-foreground: oklch(0.75 0.01 264);
  --accent: oklch(0.7 0.17 145); /* Brighter green */
  --accent-foreground: oklch(0.95 0.005 264);
  --destructive: oklch(0.6 0.2 25); /* Brighter red */
  --destructive-foreground: oklch(0.95 0.005 264);

  /* Dark UI Elements (Enhanced visibility) */
  --muted: oklch(0.24 0.012 264 / 0.7); /* More visible */
  --muted-foreground: oklch(0.65 0.01 264);
  --border: oklch(0.32 0.012 264 / 0.5); /* More visible borders */
  --input: oklch(0.27 0.012 264 / 0.85);
  --ring: oklch(0.6 0.2 250 / 0.4);
}

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* iOS Spacing System */
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: calc(var(--radius) * 4);
  --radius-full: 9999px;
}

@layer base {
  body {
    @apply bg-background text-foreground;
    /* iOS System Font Stack - SF Pro */
    font-family:
      -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue',
      sans-serif;
    /* iOS Typography Features */
    font-feature-settings:
      'liga' 1,
      'calt' 1,
      'kern' 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
}

/* Flow Designer Canvas Grid Pattern - iOS Blue Tint */
.flow-canvas-grid {
  background-image: radial-gradient(circle, oklch(0.7 0.02 250 / 0.15) 1px, transparent 1px);
  background-size: 20px 20px;
  background-position: 0 0;
}

/* Insights Dashboard Activity Bar */
.activity-bar {
  @apply bg-primary/20 hover:bg-primary/40 rounded-sm transition-all;
  height: var(--bar-height, 0px);
}

/* Activity bar height levels (0-20) for discrete height values */
.activity-bar-level-0 {
  height: 0px;
}
.activity-bar-level-1 {
  height: 3px;
}
.activity-bar-level-2 {
  height: 6px;
}
.activity-bar-level-3 {
  height: 9px;
}
.activity-bar-level-4 {
  height: 12px;
}
.activity-bar-level-5 {
  height: 15px;
}
.activity-bar-level-6 {
  height: 18px;
}
.activity-bar-level-7 {
  height: 21px;
}
.activity-bar-level-8 {
  height: 24px;
}
.activity-bar-level-9 {
  height: 27px;
}
.activity-bar-level-10 {
  height: 30px;
}
.activity-bar-level-11 {
  height: 33px;
}
.activity-bar-level-12 {
  height: 36px;
}
.activity-bar-level-13 {
  height: 39px;
}
.activity-bar-level-14 {
  height: 42px;
}
.activity-bar-level-15 {
  height: 45px;
}
.activity-bar-level-16 {
  height: 48px;
}
.activity-bar-level-17 {
  height: 51px;
}
.activity-bar-level-18 {
  height: 54px;
}
.activity-bar-level-19 {
  height: 57px;
}
.activity-bar-level-20 {
  height: 60px;
}

/* iOS Style Utilities */
@layer utilities {
  /* Hide scrollbars while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  /* Enhanced backdrop blur for glass materials */
  .backdrop-blur-glass {
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }

  /* iOS-style frosted glass effect with enhanced contrast */
  .glass-card {
    background: oklch(0.99 0.002 264 / 0.95);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid oklch(0.85 0.012 264 / 0.5);
    box-shadow:
      0 4px 16px oklch(0 0 0 / 0.06),
      0 1px 4px oklch(0 0 0 / 0.03);
  }

  .dark .glass-card {
    background: oklch(0.22 0.012 264 / 0.92);
    border: 1px solid oklch(0.32 0.012 264 / 0.5);
    box-shadow:
      0 4px 16px oklch(0 0 0 / 0.4),
      0 1px 4px oklch(0 0 0 / 0.2);
  }

  /* Elevated card with iOS shadow */
  .card-elevated {
    box-shadow:
      0 8px 32px oklch(0 0 0 / 0.08),
      0 2px 8px oklch(0 0 0 / 0.04);
  }

  .dark .card-elevated {
    box-shadow:
      0 8px 32px oklch(0 0 0 / 0.6),
      0 2px 8px oklch(0 0 0 / 0.3);
  }
}

/* iOS Safe Area Utilities */
@layer utilities {
  /* Padding utilities that respect safe areas */
  .safe-top {
    padding-top: max(1rem, var(--safe-area-inset-top));
  }

  .safe-bottom {
    padding-bottom: max(1rem, var(--safe-area-inset-bottom));
  }

  .safe-left {
    padding-left: max(1rem, var(--safe-area-inset-left));
  }

  .safe-right {
    padding-right: max(1rem, var(--safe-area-inset-right));
  }

  .safe-x {
    padding-left: max(1rem, var(--safe-area-inset-left));
    padding-right: max(1rem, var(--safe-area-inset-right));
  }

  .safe-y {
    padding-top: max(1rem, var(--safe-area-inset-top));
    padding-bottom: max(1rem, var(--safe-area-inset-bottom));
  }

  .safe-all {
    padding-top: max(1rem, var(--safe-area-inset-top));
    padding-right: max(1rem, var(--safe-area-inset-right));
    padding-bottom: max(1rem, var(--safe-area-inset-bottom));
    padding-left: max(1rem, var(--safe-area-inset-left));
  }

  /* Margin utilities for safe areas */
  .safe-mt {
    margin-top: var(--safe-area-inset-top);
  }

  .safe-mb {
    margin-bottom: var(--safe-area-inset-bottom);
  }

  /* Mobile-optimized touch targets */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Mobile-friendly scrolling */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
}
